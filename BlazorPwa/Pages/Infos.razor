@page "/infos"
@using BlazorPwa.Services
@inject StudyService StudyService

<div class="infos-container">
    <header class="header">
        <h1>Infos</h1>
    </header>

    <div class="card" style="text-align: center; background: linear-gradient(135deg, #6366f1 10%, #ec4899 100%); color: white;">
        <div style="font-size: 4rem; margin-bottom: 0.5rem;">
            @GetKawaiiAvatar()
        </div>
        <h2 style="margin-bottom: 0.5rem;">@GetLevelTitle()</h2>
        <p style="opacity: 0.9;">Continue comme √ßa !</p>
    </div>

    <div class="stats-grid">
        <div class="card stat-card">
            <div class="stat-value">@Progress.TotalCardsLearned</div>
            <div class="stat-label">Cartes apprises</div>
        </div>
        <div class="card stat-card">
            <div class="stat-value">@Progress.TotalQuizTaken</div>
            <div class="stat-label">Quiz termin√©s</div>
        </div>
        <div class="card stat-card">
            <div class="stat-value">@Math.Round(Progress.SuccessRate)%</div>
            <div class="stat-label">R√©ussite</div>
        </div>
    </div>

    <div class="card">
        <h3>√Ä propos</h3>
        <p>Cette application a √©t√© con√ßue pour aider les coll√©giens √† r√©viser efficacement gr√¢ce √† la m√©thode des flashcards et des fiches de synth√®se.</p>
    </div>

    <div class="card">
        <h3>Version</h3>
        <p>v1.0.1 (B√™ta)</p>
    </div>
</div>

@code {
    private BlazorPwa.Models.UserProgress Progress = new();

    protected override async Task OnInitializedAsync()
    {
        await StudyService.LoadProgressAsync();
        Progress = StudyService.GetProgress();
    }

    private string GetKawaiiAvatar()
    {
        if (Progress.TotalCardsLearned < 10) return "üå±";
        if (Progress.TotalCardsLearned < 50) return "üåø";
        if (Progress.TotalCardsLearned < 100) return "üå≥";
        if (Progress.TotalCardsLearned < 200) return "ü¶Ñ";
        return "üëë";
    }

    private string GetLevelTitle()
    {
        if (Progress.TotalCardsLearned < 10) return "D√©butant Curieux";
        if (Progress.TotalCardsLearned < 50) return "Apprenti S√©rieux";
        if (Progress.TotalCardsLearned < 100) return "Expert en Herbe";
        if (Progress.TotalCardsLearned < 200) return "Ma√Ætre des Fiches";
        return "L√©gende du Coll√®ge";
    }
}

<style>
    .infos-container {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    .header {
        margin-bottom: 1rem;
    }
    .card {
        background: white;
        padding: 1.5rem;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-sm);
    }
    .card h3 {
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
        color: var(--color-primary-dark);
    }
    .card p, .card li {
        color: var(--color-text);
        font-size: 0.9rem;
        line-height: 1.5;
    }
    .card ul {
        padding-left: 1.2rem;
        margin: 0;
    }
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.5rem;
    }
    .stat-card {
        padding: 1rem;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .stat-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary);
    }
    .stat-label {
        font-size: 0.7rem;
        color: var(--text-secondary);
        margin-top: 0.25rem;
    }
</style>
