@inherits LayoutComponentBase
@inject NavigationManager NavManager

<div class="app-container">
    <main class="main-content">
        @Body
    </main>

    <nav class="bottom-nav">
        <div class="nav-item @(IsActive("") ? "active" : "")" @onclick='() => NavigateTo("")'>
            <svg viewBox="0 0 24 24">
                <path d="M12 2L2 12h3v8h6v-6h2v6h6v-8h3L12 2z"/>
            </svg>
            <span>Quiz</span>
        </div>
        <div class="nav-item @(IsActive("fiches") ? "active" : "")" @onclick='() => NavigateTo("fiches")'>
            <svg viewBox="0 0 24 24">
                <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
            </svg>
            <span>Fiches</span>
        </div>
        <div class="nav-item @(IsActive("infos") ? "active" : "")" @onclick='() => NavigateTo("infos")'>
            <svg viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
            </svg>
            <span>Infos</span>
        </div>
    </nav>
</div>

@code {
    private void NavigateTo(string uri)
    {
        NavManager.NavigateTo(uri);
    }

    private bool IsActive(string uri)
    {
        var relative = NavManager.ToBaseRelativePath(NavManager.Uri);
        // Handle root case
        if (string.IsNullOrEmpty(uri) && string.IsNullOrEmpty(relative)) return true;
        if (string.IsNullOrEmpty(uri)) return false;
        
        return relative.StartsWith(uri, StringComparison.OrdinalIgnoreCase);
    }
}
